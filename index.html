<!DOCTYPE html>
<html lang="en">
<head>
    <!-- <base href="/E-Shop/"> -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./src/output.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"></script>
    <title>E-Shop</title>
<style>
    /* Your existing styles - keep all of these */
    .fade-in {
        opacity: 0;
        animation: fadeIn 0.5s ease-in-out forwards;
    }
    .slide-in {
        transform: translateY(20px);
        opacity: 0;
        animation: slideIn 0.5s ease-out forwards;
    }
    @keyframes fadeIn {
        to { opacity: 1; }
    }
    @keyframes slideIn {
        to { transform: translateY(0); opacity: 1; }
    }
    .gradient-bg {
        background: linear-gradient(135deg, #7c3aed 0%, #db2777 100%);
    }
    .glass-effect {
        backdrop-filter: blur(12px);
        background: rgba(255, 255, 255, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    }
    .loading-skeleton {
        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
    }
    @keyframes loading {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
    }
    .toast {
        animation: slideInRight 0.3s ease-out, fadeOut 0.3s ease-out 2.7s forwards;
    }
    @keyframes slideInRight {
        from { transform: translateX(100%); }
        to { transform: translateX(0); }
    }
    @keyframes fadeOut {
        to { opacity: 0; visibility: hidden; }
    }
    .card-hover {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .card-hover:hover {
        transform: translateY(-4px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
    }
    .navbar-slide {
        transform: translateY(-100%);
        animation: slideInNavbar 0.5s ease-out forwards;
    }
    @keyframes slideInNavbar {
        to { transform: translateY(0); }
    }
    
    /* Hero section visibility transitions */
    .hero-visible {
        opacity: 1;
        visibility: visible;
        height: auto;
        transition: opacity 0.3s ease-out, visibility 0.3s ease-out;
    }
    .hero-hidden {
        opacity: 0;
        visibility: hidden;
        height: 0;
        overflow: hidden;
        transition: opacity 0.3s ease-out, visibility 0.3s ease-out, height 0.3s ease-out;
    }

    /* ===== HERO SECTION ENHANCEMENTS ===== */
    
    /* Parallax shapes for smooth movement */
    .parallax-shape-1,
    .parallax-shape-2 {
        will-change: transform;
        transition: transform 0.1s ease-out;
    }
    
    /* Enhanced gradient background with animation */
    .hero-gradient-bg {
        background: linear-gradient(135deg, #7c3aed 0%, #db2777 50%, #f59e0b 100%);
        background-size: 200% 200%;
        animation: gradientShift 8s ease infinite;
    }
    
    @keyframes gradientShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }
    
    /* Staggered animations for hero elements */
    .hero-title {
        animation-delay: 0.2s;
    }
    
    .hero-subtitle {
        animation-delay: 0.4s;
    }
    
    .hero-description {
        animation-delay: 0.6s;
    }
    
    .hero-buttons {
        animation-delay: 0.8s;
    }
    
    .hero-features {
        animation-delay: 1s;
    }
    
    .hero-stats {
        animation-delay: 1.2s;
    }
    
    /* Enhanced button effects */
    .hero-btn-primary {
        position: relative;
        overflow: hidden;
        background: linear-gradient(135deg, #7c3aed 0%, #db2777 100%);
        transition: all 0.3s ease;
    }
    
    .hero-btn-primary::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: left 0.5s ease;
    }
    
    .hero-btn-primary:hover::before {
        left: 100%;
    }
    
    .hero-btn-primary:hover {
        transform: translateY(-2px) scale(1.05);
        box-shadow: 0 10px 25px rgba(124, 58, 237, 0.4);
    }
    
    /* Glass effect enhancements for hero */
    .hero-glass {
        backdrop-filter: blur(16px);
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
    }
    
    .hero-glass:hover {
        backdrop-filter: blur(20px);
        background: rgba(255, 255, 255, 0.15);
        transform: translateY(-2px);
    }
    
    /* Floating animation for decorative elements */
    .hero-float {
        animation: heroFloat 6s ease-in-out infinite;
    }
    
    .hero-float-delayed {
        animation: heroFloat 6s ease-in-out infinite;
        animation-delay: 3s;
    }
    
    @keyframes heroFloat {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(5deg); }
    }
    
    /* Pulse effect for stats */
    .hero-stat-pulse {
        animation: statPulse 2s ease-in-out infinite;
    }
    
    @keyframes statPulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }
    
    /* Typing cursor effect */
    .typing-cursor::after {
        content: '|';
        animation: blink 1s infinite;
        color: #7c3aed;
    }
    
    @keyframes blink {
        0%, 50% { opacity: 1; }
        51%, 100% { opacity: 0; }
    }
    
    /* Scroll indicator enhancement */
    .hero-scroll-indicator {
        animation: scrollBounce 2s ease-in-out infinite;
    }
    
    @keyframes scrollBounce {
        0%, 20%, 50%, 80%, 100% { transform: translateY(0) translateX(-50%); }
        40% { transform: translateY(-10px) translateX(-50%); }
        60% { transform: translateY(-5px) translateX(-50%); }
    }
    
    /* Feature checkmark animation */
    .hero-feature-check {
        animation: checkmarkPop 0.6s ease-out forwards;
        animation-delay: var(--delay, 0s);
    }
    
    @keyframes checkmarkPop {
        0% { transform: scale(0) rotate(-45deg); opacity: 0; }
        50% { transform: scale(1.2) rotate(-45deg); opacity: 1; }
        100% { transform: scale(1) rotate(0deg); opacity: 1; }
    }
    
    /* Responsive enhancements */
    @media (max-width: 768px) {
        .parallax-shape-1,
        .parallax-shape-2 {
            opacity: 0.05 !important;
            transform: scale(0.7) !important;
        }
        
        .hero-glass {
            backdrop-filter: blur(8px);
        }
        
        .slide-in {
            transform: translateY(10px);
        }
    }
    
    /* Performance optimizations */
    .hero-section * {
        backface-visibility: hidden;
        perspective: 1000px;
    }
    
    /* Smooth scrolling enhancement */
    html {
        scroll-behavior: smooth;
    }
    
    /* Loading state for hero */
    .hero-loading {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.8s ease-out;
    }
    
    .hero-loaded {
        opacity: 1;
        transform: translateY(0);
    }
</style>
</head>
<body class="bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 min-h-screen font-sans">
    <div id="toast-container" class="fixed bottom-4 right-4 z-50"></div>
    <nav id="navbar-container" class="sticky top-0 z-40"></nav>
    <main>
        <section id="hero-section" class="hero-visible"></section>
        <div class="container mx-auto px-4 py-12 max-w-7xl">
            <h1 class="text-3xl font-bold text-gray-900 mb-8 slide-in">Our Products</h1>
            <section id="product-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></section>
        </div>
    </main>
    <footer id="footer-container"></footer>

    <script type="module" src="./dist/components/footer.js"></script>
    <script type="module" src="./dist/components/nav.js"></script>
    <script type="module" src="./dist/components/product-card.js"></script>
    <script type="module" src="./dist/components/hero-section.js"></script>
    
    <script>
        // Function to toggle hero section visibility
        function toggleHeroSection(isSearching) {
            const heroSection = document.getElementById('hero-section');
            if (heroSection) {
                if (isSearching) {
                    heroSection.className = 'hero-hidden';
                } else {
                    heroSection.className = 'hero-visible';
                }
            }
        }

        // Function to check if search is active
        function checkSearchState() {
            // Look for search input in the navbar
            const searchInput = document.querySelector('#navbar-container input[type="search"], #navbar-container input[placeholder*="search" i], #navbar-container input[placeholder*="Search" i]');
            
            if (searchInput) {
                const isSearching = searchInput.value.trim().length > 0;
                toggleHeroSection(isSearching);
            }
        }

        // Set up search detection after DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Initial check
            setTimeout(checkSearchState, 100);
            
            // Set up observers for navbar changes
            const navContainer = document.getElementById('navbar-container');
            if (navContainer) {
                // Observer for when navbar content is added/changed
                const observer = new MutationObserver(function(mutations) {
                    mutations.forEach(function(mutation) {
                        if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
                            setTimeout(setupSearchListeners, 100);
                        }
                    });
                });
                
                observer.observe(navContainer, {
                    childList: true,
                    subtree: true
                });
            }
            
            // Setup search listeners initially
            setTimeout(setupSearchListeners, 500);
        });

        // Function to setup search input listeners
        function setupSearchListeners() {
            const searchInputs = document.querySelectorAll('#navbar-container input[type="search"], #navbar-container input[placeholder*="search" i], #navbar-container input[placeholder*="Search" i]');
            
            searchInputs.forEach(input => {
                // Remove existing listeners to avoid duplicates
                input.removeEventListener('input', handleSearchInput);
                input.removeEventListener('keyup', handleSearchInput);
                input.removeEventListener('focus', handleSearchFocus);
                input.removeEventListener('blur', handleSearchBlur);
                
                // Add new listeners
                input.addEventListener('input', handleSearchInput);
                input.addEventListener('keyup', handleSearchInput);
                input.addEventListener('focus', handleSearchFocus);
                input.addEventListener('blur', handleSearchBlur);
            });
        }

        // Search input handlers
        function handleSearchInput(event) {
            const isSearching = event.target.value.trim().length > 0;
            toggleHeroSection(isSearching);
        }

        function handleSearchFocus(event) {
            // Optional: Hide hero when search is focused (even if empty)
            // toggleHeroSection(true);
        }

        function handleSearchBlur(event) {
            // Check if there's still content when focus is lost
            const isSearching = event.target.value.trim().length > 0;
            toggleHeroSection(isSearching);
        }

        // Global function for external components to trigger hero visibility
        window.updateHeroVisibility = function(isSearching) {
            toggleHeroSection(isSearching);
        };

        // Listen for custom events that might be dispatched by nav component
        document.addEventListener('searchStateChanged', function(event) {
            toggleHeroSection(event.detail.isSearching);
        });
    </script>
    
</body>
</html>